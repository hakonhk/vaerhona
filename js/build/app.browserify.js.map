{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","js/chart.js","js/data.js","js/image.js","js/interactions.js","js/layout.js","js/main.js","js/settings.js","node_modules/imagesloaded/imagesloaded.js","node_modules/imagesloaded/node_modules/eventie/eventie.js","node_modules/imagesloaded/node_modules/wolfy87-eventemitter/EventEmitter.js"],"names":[],"mappings":"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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.browserify.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var data = require('./data.js');\n\nvar types = {\n\ttempOutside: {\n\t\tdataID: \"temperature-outside\",\n\t\tname: \"Temperatur\",\n\t\tvalueSuffix: \"°C\"\n\t},\n\tpressure: {\n\t\tdataID: \"pressure\",\n\t\tname: \"Lufttrykk\",\n\t\tvalueSuffix: \"hPa\"\n\t},\n\thumidity: {\n\t\tdataID: \"humidity\",\n\t\tname: \"Luftfuktighet\",\n\t\tvalueSuffix: \"%\"\n\t}\n};\n\nsetChartTheme();\n\n// Load temperature chart\nfunction load () {\n\t\n\tvar callback = function () {};\n\tvar type = false;\n\n\tvar arg_len = arguments.length;\n\tif (arg_len > 0) {\n\t\t\n\t\tif ($.isFunction(arguments[0])) {\n\t\t\tcallback = arguments[0];\n\t\t}\n\t\telse {\n\t\t\ttype = arguments[0];\n\t\t}\n\n\t\tif (arg_len > 1) {\n\t\t\tcallback = arguments[1];\n\t\t}\n\t}\n\n\tvar items = data.getCurrent();\n\n\t// Default chart\n\tvar typeDef = types.tempOutside;\n\tweather.chartTypeDef = typeDef.dataID;\n\n\t// Get dates\n\tvar items_date = GetOnlyData(items, \"date\");\n\n\t// Set tickInterval\n\tvar tickInterval = Math.floor(items_date.length / 10);\n\tif (window.innerWidth <= 500) {\n\t\ttickInterval = Math.floor(items_date.length / 2);\n\t}\n\n\t// Already initiated. Just update\n\tif (weather.highchart) {\n\t\t\n\t\tif (type) {\n\t\t\ttypeDef = types[type];\n\t\t}\n\t\t\n\t\tvar weatherData;\n\t\t\n\t\tif (typeDef) {\n\t\t\tweatherData = GetOnlyData(items, typeDef.dataID);\n\n\t\t\tweather.chartTypeDef = typeDef;\n\t\t}\n\t\telse {\n\t\t\tweatherData = GetOnlyData(items, weather.chartTypeDef);\n\t\t}\n\n\t\tweather.highchart.series[0].setData(weatherData);\n\n\t\t// Update\n\t\tweather.highchart.xAxis[0].setCategories(GetOnlyData(items, \"date\"));\n\n\t\tweather.highchart.xAxis[0].update({\n\t\t\ttickInterval: tickInterval,\n\t\t\tcategories: items_date\n\t\t});\n\t}\n\t\n\t// Init highchart using outside temperature\n\telse {\n\n\t\t// Get temperature outside\n\t\tvar items_default = GetOnlyData(items, weather.chartTypeDef);\n\n\t\tvar $chartEl = $('#chart-canvas');\n\t\t\n        // Go!\n        $chartEl.highcharts({\n            title: false,\n            subtitle: false,\n            legend: false,\n            xAxis: {\n                tickInterval: tickInterval,\n                categories: items_date\n            },\n            series: [{\n                data: items_default\n            }],\n            yAxis: {\n                title: false,\n                plotLines: [{\n                    value: 0,\n                    width: 1,\n                    color: '#808080'\n                }]\n            }\n        });\n\n        weather.highchart = $chartEl.highcharts();\n    }\n\n    // Set serie values\n    var serie = weather.highchart.series[0];\n\tif (serie && typeDef) {\n\t\tserie.name = typeDef.name;\n\t\tserie.tooltipOptions.pointFormat = \"<b>{point.y}</b> \" + typeDef.valueSuffix;\n\t}\n\n    if (callback) {\n\t\tsetTimeout(callback, 500);\n\t}\n\n    // Extract relevant data\n\tfunction GetOnlyData (arr, dataType) {\n\t\tvar returnItems = [];\n\n\t\tarr.map(function (item) {\n\t\t\tif (!item.motion) {\n\t\t\t\tswitch (dataType) {\n\t\t\t\t\tcase \"temperature-outside\":\n\t\t\t\t\t\treturnItems.push(item.tmp_o);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"temperature-inside\":\n\t\t\t\t\t\treturnItems.push(item.tmp_i);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"pressure\":\n\t\t\t\t\t\treturnItems.push(item.prs_o);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"humidity\":\n\t\t\t\t\t\treturnItems.push(item.hum_o);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"date\":\n\t\t\t\t\t\treturnItems.push(weather.shortDateTime(new Date(item.t)));\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn returnItems;\n\t}\n}\n\nfunction setChartTheme () {\n\n\t/**\n\t * Gray theme for Highcharts JS\n\t * @author Torstein Honsi\n\t */\n\tHighcharts.theme = {\n\t\tcolors: [\"#e0e0e0\"],\n\t\tchart: {\n\t\t\tbackgroundColor: \"transparent\",\n\t\t\tborderWidth: 0,\n\t\t\tborderRadius: 0,\n\t\t\tplotBackgroundColor: null,\n\t\t\tplotShadow: false,\n\t\t\tplotBorderWidth: 0\n\t\t},\n\t\ttitle: {\n\t\t\tstyle: {\n\t\t\t\tcolor: '#FFF',\n\t\t\t\tfont: '16px Lucida Grande, Lucida Sans Unicode, Verdana, Arial, Helvetica, sans-serif'\n\t\t\t}\n\t\t},\n\t\tsubtitle: {\n\t\t\tstyle: {\n\t\t\t\tcolor: '#DDD',\n\t\t\t\tfont: '12px Lucida Grande, Lucida Sans Unicode, Verdana, Arial, Helvetica, sans-serif'\n\t\t\t}\n\t\t},\n\t\txAxis: {\n\t\t\tgridLineWidth: 0,\n\t\t\tlineColor: '#999',\n\t\t\ttickColor: '#999',\n\t\t\tlabels: {\n\t\t\t\tstyle: {\n\t\t\t\t\tcolor: '#999',\n\t\t\t\t\tfontWeight: 'bold'\n\t\t\t\t}\n\t\t\t},\n\t\t\ttitle: {\n\t\t\t\tstyle: {\n\t\t\t\t\tcolor: '#AAA',\n\t\t\t\t\tfont: 'bold 12px Lucida Grande, Lucida Sans Unicode, Verdana, Arial, Helvetica, sans-serif'\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tyAxis: {\n\t\t\talternateGridColor: null,\n\t\t\tminorTickInterval: null,\n\t\t\tgridLineColor: 'rgba(255, 255, 255, .1)',\n\t\t\tminorGridLineColor: 'rgba(255,255,255,0.07)',\n\t\t\tlineWidth: 0,\n\t\t\ttickWidth: 0,\n\t\t\tlabels: {\n\t\t\t\tstyle: {\n\t\t\t\t\tcolor: '#999',\n\t\t\t\t\tfontWeight: 'bold'\n\t\t\t\t}\n\t\t\t},\n\t\t\ttitle: {\n\t\t\t\tstyle: {\n\t\t\t\t\tcolor: '#AAA',\n\t\t\t\t\tfont: 'bold 12px Lucida Grande, Lucida Sans Unicode, Verdana, Arial, Helvetica, sans-serif'\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tlabels: {\n\t\t\tstyle: {\n\t\t\t\tcolor: '#CCC'\n\t\t\t}\n\t\t},\n\t\ttooltip: {\n\t\t\tbackgroundColor: \"rgba(50, 50, 50, .8)\",\n\t\t\tborderWidth: 0,\n\t\t\tstyle: {\n\t\t\t\tcolor: '#ccc'\n\t\t\t},\n\t\t\tpointFormat: \"<b>{point.y}</b> °C\"\n\t\t},\n\n\t\tplotOptions: {\n\t\t\tline: {\n\t\t\t\tmarker: {\n\t\t\t\t\tenabled: false\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\ttoolbar: {\n\t\t\titemStyle: {\n\t\t\t\tcolor: '#CCC'\n\t\t\t}\n\t\t},\n\n\t\tnavigator: {\n\t\t\thandles: {\n\t\t\t\tbackgroundColor: '#666',\n\t\t\t\tborderColor: '#AAA'\n\t\t\t},\n\t\t\toutlineColor: '#CCC',\n\t\t\tmaskFill: 'rgba(16, 16, 16, 0.5)',\n\t\t\tseries: {\n\t\t\t\tcolor: '#7798BF',\n\t\t\t\tlineColor: '#A6C7ED'\n\t\t\t}\n\t\t},\n\n\t\t// special colors for some of the demo examples\n\t\tlegendBackgroundColor: 'rgba(48, 48, 48, 0.8)',\n\t\tbackground2: 'rgb(70, 70, 70)',\n\t\tdataLabelsColor: '#444',\n\t\ttextColor: '#E0E0E0',\n\t\tmaskColor: 'rgba(255,255,255,0.3)'\n\t};\n\n\t// Apply the theme\n\tHighcharts.setOptions(Highcharts.theme);\n}\n\nmodule.exports = {\n\tload\n};","var settings = require('./settings.js'),\n\timage = require('./image.js'),\n\timagesLoaded = require('imagesloaded');\n\nvar items_current = [];\nvar items_all = [];\n\n// Get data from localStorage or API\nfunction Get (options) {\n\t\n\tvar data_loader = $.Deferred(),\n\t\tdates = [],\n\t\tapi_date_from,\n\t\tapi_date_to,\n\t\tdatetime_from,\n\t\tdatetime_to;\n\n\t// Show loading indication\n\tweather.loading();\n\tdata_loader.always(function () {\n\t\tweather.loading(false);\n\t});\n\n\t// Schedule the last image to be stored in localstorage after completness\n\tdata_loader.then(StoreLastImage);\n\n\tdatetime_from = options.from.getTime();\n\tdatetime_to = options.to.getTime();\n\n\t// Dates to ask from API\n\tapi_date_from = new Date(datetime_from);\n\tapi_date_to = new Date(datetime_to);\n\n\tvar forceGetFromApi = options.forceGetFromApi;\n\n\t// Check where the data is avalible\n\titems_current = DataAvailbleAtClient();\n\n\tif (items_current.length === 0 || forceGetFromApi) {\n\n\t\t// Get from API\n\t\tGetDataFromAPI(api_date_from, api_date_to, function (items) {\n\n\t\t\t// Merge the new data with the existing cache (items_all)\n\t\t\tMergeWithCache(items);\n\n\t\t\t// Save everything\n\t\t\tSave();\n\n\t\t\t// Get the selection again\n\t\t\titems_current = DataAvailbleAtClient(true);\n\n\t\t\t// Resolve promise\n\t\t\tdata_loader.resolve(items_current);\n\t\t});\n\t}\n\t// Its all good. Just resolve without asking the API for data =)\n\telse {\n\t\tdata_loader.resolve(items_current);\n\t}\n\n\treturn data_loader;\n\n\t// Check if we can use only the data from the client\n\tfunction DataAvailbleAtClient (forceGetFromClient) {\n\t\tvar items = GetDataFromClient(),\n\t\t\tlen = items.length;\n\n\t\t// If there is any data from the client\n\t\tif (len > 0) {\n\n\t\t\t// Compile list of all dates\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tdates.push(items[i].t);\n\t\t\t}\n\n\t\t\t// See if all the hours between from and to are availble\n\t\t\twhile (!FromDateIsLargerThanTo() && dates.indexOf(api_date_from.getTime()) !== -1) {\n\t\t\t\tapi_date_from.setHours(api_date_from.getHours() + 1);\n\t\t\t}\n\t\t\twhile (!FromDateIsLargerThanTo() && dates.indexOf(api_date_to.getTime()) !== -1) {\n\t\t\t\tapi_date_to.setHours(api_date_to.getHours() - 1);\n\t\t\t}\n\n\t\t\t// We have all data on the client. Continue withouth asking API for data\n\t\t\tif (forceGetFromClient || FromDateIsLargerThanTo()) {\n\t\t\t\treturn filterItemsForCurrentDate();\n\t\t\t}\n\t\t\t//else if (forceGetFromClient) {\n\t\t\t//\treturn filterItemsForCurrentDate();\n\t\t\t//}\n\t\t}\n\n\t\t// Compile list of items use\n\t\tfunction filterItemsForCurrentDate () {\n\t\t\tvar returnItems = [];\n\n\t\t\tfor (var x = 0; x < len; x++) {\n\t\t\t\tvar item = items[x];\n\t\t\t\t\n\t\t\t\tif (item.t >= datetime_from && item.t <= datetime_to) {\n\t\t\t\t\treturnItems.push(item);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn returnItems;\n\t\t}\n\n\t\treturn [];\n\t}\n\n\tfunction FromDateIsLargerThanTo () {\n\t\treturn api_date_from.getTime() > api_date_to.getTime();\n\t}\n}\n\nfunction GetDataFromAPI (from, to, callback) {\n\t\n\tvar date_from = new Date(from.getTime());\n\tvar date_to = new Date(to.getTime());\n\n\t$.ajax({\n\t\turl: \"http://www.vhsys.no/api/\",\n\t\tdataType: \"jsonp\",\n\t\tcache: false,\n\t\tdata: {\n\t\t\tfrom: CreateDateKeyDb(date_from),\n\t\t\tto: CreateDateKeyDb(date_to),\n\t\t\tplace: settings.place,\n\t\t\ttestdata: kw.testapi\n\t\t}\n\t}).then(function (response) {\n\t\tif (response && response.success) {\n\n\t\t\tvar items_from_api = ParseAPIdata(response.data);\n\n\t\t\tif (response.firstSnapshotTime) {\n\t\t\t\tweather.setMinimumDate(new Date(response.firstSnapshotTime * 1000));\n\t\t\t}\n\n\t\t\tif (callback) {\n\t\t\t\tcallback(items_from_api);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tonRequestFail();\n\t\t}\n\t}).fail(onRequestFail);\n\n\tfunction onRequestFail () {\n\t\tif (callback) {\n\t\t\tcallback([]);\n\t\t}\n\t}\n\n\t// Parse data API response\n\tfunction ParseAPIdata (rawArray) {\n\t\t\n\t\tvar items_to_return = [],\n\t\t\tlen = rawArray.length;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\n\t\t\tvar item = rawArray[i];\n\t\t\tvar date = new Date(item.time * 1000);\n\n\t\t\tvar parsedItem = {\n\t\t\t\tdate: date,\n\t\t\t\tt: Number(date),\n\t\t\t\tmotion: parseInt(item.motion_event),\n\t\t\t\ttmp_o: Round(parseFloat(item.outside_temperature), 1),\n\t\t\t\ttmp_i: Round(parseFloat(item.inside_temperature), 1),\n\t\t\t\tprs_o: parseInt(item.outside_pressure),\n\t\t\t\thum_o: parseFloat(item.outside_humidity),\n\t\t\t\timg: item.image\n\t\t\t};\n\n\t\t\tCreateImageUrl(parsedItem);\n\n\t\t\titems_to_return.push(parsedItem);\n\t\t}\n\n\t\treturn items_to_return;\n\t}\n}\n\n// Retrieves data from cache or client storage\nfunction GetDataFromClient () {\n\n\tvar items_string,\n\t\traw_data;\n\n\t// If already got \n\tif (items_all.length > 0) {\n\t\treturn items_all;\n\t}\n\n\t// Attempt to get from local storage\n\ttry {\n\t\titems_string = localStorage.getItem(GetLocalStorageKey());\n\t}\n\tcatch (e) {\n\t\tconsole.error(\"Could not get data from localStorage\", e);\n\t}\n\n\tif (items_string != null) {\n\t\traw_data = JSON.parse(items_string);\n\t\titems_all = ParseLocalStorageData(raw_data.items);\n\t}\n\n\t// Enriching data from localStorage storage\n\tfunction ParseLocalStorageData (items) {\n\n\t\t// Add date property\n\t\titems.map(function (item) {\n\t\t\titem.date = new Date(item.t);\n\t\t\tCreateImageUrl(item);\n\t\t});\n\n\t\treturn items;\n\t}\n\n\treturn items_all;\n}\n\nfunction CreateImageUrl (item) {\n\tvar year = item.date.getFullYear();\n\tvar month = weather.ensureDigits(item.date.getMonth() + 1, 2);\n\tvar date = weather.ensureDigits(item.date.getDate(), 2);\n\t\n\titem.img_url = settings.place + \"/\" + year + \"/\" + month + \"/\" + date + \"/\" + item.img;\n}\n\n// Save items to localStorage\nfunction Save () {\n\tvar items = [],\n\t\tlen = items_all.length;\n\n\t// Create clone of all objects\n\tfor (var i = 0; i < len; i++) {\n\t\titems.push($.extend({}, items_all[i]));\n\t}\n\n\t// Remove date property before saving\n\titems.map(function (item) {\n\t\tdelete item.date;\n\t\tdelete item.img_url;\n\t});\n\n\tvar saveObj = {\n\t\tplace: settings.place,\n\t\ttime: Number(new Date()),\n\t\titems: items\n\t};\n\n\t// Store\n\treturn SaveToLocalStorage(GetLocalStorageKey(), JSON.stringify(saveObj));\n}\n\nfunction SaveToLocalStorage (key, data) {\n\ttry {\n\t\tlocalStorage.setItem(key, data);\n\t\treturn true;\n\t}\n\tcatch (e) {\n\t\tconsole.log(e);\n\t}\n\n\treturn false;\n}\n\n// Merge new array with client array\nfunction MergeWithCache (newItems) {\n\n\tvar keys = [],\n\t\tlen = items_all.length,\n\t\tlen_new = newItems.length,\n\t\titem;\n\n\t// Create array of keys of the existing array\n\tfor (var i = 0; i < len; i++) {\n\t\tkeys.push(items_all[i].t);\n\t}\n\n\t// Add the entries that does not exist in items_all\n\tfor (var x = 0; x < len_new; x++) {\n\t\titem = newItems[x];\n\t\tif (keys.indexOf(item.t) === -1) {\n\t\t\titems_all.push(item);\n\t\t}\n\t}\n\t\n\t// Sort by date asc\n\titems_all.sort(function (a, b) {\n\t\treturn Number(a.date) - Number(b.date);\n\t});\n\n\treturn items_all;\n}\n\n// Round helper\nfunction Round (number, decimals) {\n\tvar pow = Math.pow(10, decimals);\n\treturn parseInt(number * pow) / pow;\n}\n\n// The local storage key\nfunction GetLocalStorageKey () {\n\treturn settings.localStorageKey + \"_\" + settings.place;\n}\n\n//function CreateDateKey (date) {\n//\treturn date.getFullYear() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getDate();\n//}\n\nfunction CreateDateKeyDb (date) {\n\treturn date.getFullYear() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getDate();\n}\n\nfunction GetCurrent () {\n\treturn items_current;\n}\n\nfunction GetCurrentLength () {\n\treturn items_current.length;\n}\n\nfunction GetAll () {\n\treturn items_all;\n}\n\nfunction StoreLastImage () {\n\n\tvar lastSnapshot = items_all[items_all.length - 1];\n\n\t// Dont do this atm. The canvas width will be wider than the window width and will cause horizontal scrollbar\n\tif (!lastSnapshot || true) {\n\t\treturn;\n\t}\n\n\tif (!weather.$.imageCanvas) {\n\t\tweather.$.imageCanvas = $(\"<canvas class='image-binary' />\");\n\t\tweather.$.imageCanvas.appendTo(weather.$.app);\n\t}\n\n\tvar ctx = weather.$.imageCanvas[0].getContext(\"2d\");\n\tvar $img = $(\"<img crossorigin='anonymous' class='image-binary-helper' src='\" + image.resolve(lastSnapshot.img_url, false) + \"' />\").appendTo(weather.$.app);\n\t\n\timagesLoaded($img[0], function () {\n\n\t\tweather.$.imageCanvas[0].width = weather.imageWidth;\n\t\tweather.$.imageCanvas[0].height = weather.imageHeight;\n\n\t\tctx.drawImage($img[0], 0, 0);\n\n\t\t// The image must be from same origin if attempting to call toDataURL\n\t\ttry {\n\t\t\tvar imageData = weather.$.imageCanvas[0].toDataURL(\"image/jpeg\");\n\n\t\t\tvar lastImage = {\n\t\t\t\timg: lastSnapshot.img_url,\n\t\t\t\tdata: imageData\n\t\t\t};\n\n\t\t\tSaveToLocalStorage(GetLocalStorageKey() + \"_image\", JSON.stringify(lastImage));\n\t\t}\n\t\tcatch (e) {\n\t\t\tconsole.log(e);\n\t\t}\n\n\t\tsetTimeout(function () {\n\t\t\t$img.remove();\n\t\t}, 100);\n\t});\n}\n\nfunction GetStoredImage () {\n\tvar last = {};\n\n\ttry {\n\t\tvar item = localStorage.getItem(GetLocalStorageKey() + \"_image\");\n\t\tif (item) {\n\t\t\tlast = JSON.parse(item);\n\t\t}\n\t}\n\tcatch (e) {\n\t\tconsole.log(e);\n\t}\n\n\treturn last;\n}\n\nmodule.exports = {\n\tget: Get,\n\tgetCurrent: GetCurrent,\n\tgetCurrentLength: GetCurrentLength,\n\tgetAll: GetAll,\n\tgetFromAPI: GetDataFromAPI,\n\tgetFromClient: GetDataFromClient,\n\tgetStoredImage: GetStoredImage\n};","var data;\n\nvar current = {\n\t\tindex: 0,\n\t\titem: null,\n\t\ttransform: []\n\t};\n\nfunction PageLoad () {\n\n\t// Not sure why I cannot require the data at the top. Need to figure this out.\n\tdata = require('./data.js');\n}\n\n// Show last image in list and pre load close images\nfunction Load (options) {\n\n\toptions = options || {};\n\n\tvar items = data.getCurrent(),\n\t\tlastIndex = items.length - 1,\n\t\tindexToShow;\n\n\tif (lastIndex < 0) {\n\t\tlastIndex = 0;\n\t}\n\n\t// Index by options\n\tif (typeof options.indexToShow !== \"undefined\") {\n\t\tindexToShow = options.indexToShow;\n\t}\n\t// Index by current item\n\telse if (current.item != null) {\n\t\tvar time = current.item.date.getTime();\n\n\t\t// New range starts after the last index\n\t\tif (items[0] && items[0].date.getTime() > time) {\n\t\t\tindexToShow = 0; \n\t\t}\n\t\telse {\n\t\t\titems.map(function (itm, index) {\n\t\t\t\tif (itm.date.getTime() === time) {\n\t\t\t\t\tindexToShow = index;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t// Not set, just show last\n\tif (indexToShow == null) {\n\t\tindexToShow = lastIndex;\n\t}\n\n\t// Initiate kw range\n\tweather.$.rangeKw.kwRange({\n\t\tmax: lastIndex,\n\t\tvalue: indexToShow,\n\t\tmarkIntervals: createMotionIntervals(items),\n\t\tonChange: function (index) {\n\t\t\tLoadImage(index);\n\t\t}\n\t});\n\n\t// Show the specified image\n\tLoadImage(indexToShow, items);\n}\n\n// Create motion intervals\nfunction createMotionIntervals (items) {\n\n\tvar motionIntervals = [];\n\tvar motionCurrentInterval = [];\n\tvar pctMultiplier = 100 / items.length;\n\n\titems.forEach(function (item, index) {\n\t\tif (item.motion) {\n\t\t\tmotionCurrentInterval.push(index);\n\t\t}\n\t\telse if (motionCurrentInterval.length > 0) {\n\t\t\tendInterval();\n\t\t}\n\t});\n\n\tendInterval();\n\n\tfunction endInterval () {\n\t\tif (motionCurrentInterval.length > 0) {\n\t\t\tvar interval = {\n\t\t\t\tcls: \"motion\",\n\t\t\t\tstart: motionCurrentInterval[0],\n\t\t\t\tend: motionCurrentInterval[motionCurrentInterval.length - 1]\n\t\t\t};\n\t\t\tinterval.startPct = interval.start * pctMultiplier;\n\t\t\tinterval.endPct = (interval.end * pctMultiplier) + pctMultiplier;\n\t\t\tinterval.widthPct = interval.endPct - interval.startPct;\n\t\t\t\n\t\t\tmotionIntervals.push(interval);\n\n\t\t\tmotionCurrentInterval.length = 0;\n\t\t}\n\t}\n\n\treturn motionIntervals;\n}\n\n// Show image in list and pre load 10 closest\nfunction LoadImage (index, items) {\n\n\titems = items || data.getCurrent();\n\n\tvar len = items.length;\n\n\t// Determine index input type\n\tif (typeof index === \"object\") {\n\t\tif (index.pct) {\n\t\t\tindex = Math.floor(len * index.pct);\n\t\t}\n\t}\n\telse if (typeof index === \"string\") {\n\t\tif (index === \"first\") {\n\t\t\tindex = 0;\n\t\t}\n\t\telse if (index === \"last\") {\n\t\t\tindex = len - 1;\n\t\t}\n\n\t\t// Ca. one day up/down\n\t\telse if (index === \"+1d\" || index === \"-1d\") {\n\t\t\t\n\t\t\tvar checkIndex = current.index,\n\t\t\t\tfound = false,\n\t\t\t\ttimeOneDay = 1000 * 60 * 60 * 24,\n\t\t\t\tincrement = 1,\n\t\t\t\tcheckItem;\n\n\t\t\tif (index === \"-1d\") {\n\t\t\t\tincrement = -1;\n\t\t\t}\n\n\t\t\tdo {\n\t\t\t\tcheckIndex = checkIndex + increment;\n\t\t\t\tcheckItem = items[checkIndex];\n\n\t\t\t\tif (checkItem) {\n\t\t\t\t\t\n\t\t\t\t\tif (Math.abs(checkItem.t - current.item.t) >= timeOneDay) {\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\twhile (checkIndex < items.length && checkIndex >= 0 && !found);\n\t\t\t\n\t\t\tindex = checkIndex;\n\t\t}\n\t}\n\n\tindex = parseInt(index);\n\t\n\tvar item = items[index];\n\tif (item) {\n\n\t\tcurrent.index = index;\n\t\tcurrent.item = item;\n\t\t\n\t\tdisplayImage(items);\n\n\t\tvar longDate = \"<span class='long-date'>\" + weather.prettyDate(item.date) + \"</span>\";\n\t\tvar mediumDate = \"<span class='medium-date'>\" + weather.prettyDate(item.date, \"short\") + \"</span>\";\n\t\tvar shortDate = \"<span class='short-date'>\" + weather.shortDateTime(item.date) + \"</span>\";\n\n\t\tweather.$.imgDate.html(longDate + mediumDate + shortDate);\n\t\tweather.$.imgWeather.html(\"<span>\" + item.tmp_o + \"&#8451;</span><span>\" + item.hum_o + \"%</span><span>\" + parseInt(item.prs_o) + \"hPa</span>\");\n\n\t\t// Update isLast flag\n\t\tcurrent.indexIsLast = current.index === len - 1;\n\n\t\tweather.$.rangeKw.kwRange(\"setValue\", {\n\t\t\tvalue: index,\n\t\t\ttext: weather.time(item.date, true),\n\t\t\tcls: item.motion ? \"motion\" : \"\"\n\t\t});\n\t}\n\n\treturn index;\n}\n\n// Handles the display of the current item and preloads the other closest items\nvar displayImage = (function () {\n\tvar loadedUrls = [],\n\t\t$img;\n\n\treturn function (items) {\n\n\t\tif (!$img) {\n\t\t\t$img = $(\"<div class='selected'/>\");\n\t\t\tweather.$.imgWrap.append($img);\n\t\t}\n\t\t$img.css({\n\t\t\tbackgroundImage: `url(${ResolveImg(current.item.img_url)})`\n\t\t});\n\t\treturn;\n\n\t\tvar $imgs = weather.$.imgWrap.children(),\n\t\t\tnewUrls = [],\n\t\t\timgsInsert = [];\n\n\t\t// Load this and 5 before and after\n\t\thandleItem(current.item);\n\t\thandleItem(items[current.index + 1]);\n\t\thandleItem(items[current.index + 2]);\n\t\thandleItem(items[current.index + 3]);\n\t\thandleItem(items[current.index + 4]);\n\t\thandleItem(items[current.index + 5]);\n\t\thandleItem(items[current.index - 1]);\n\t\thandleItem(items[current.index - 2]);\n\t\thandleItem(items[current.index - 3]);\n\t\thandleItem(items[current.index - 4]);\n\t\thandleItem(items[current.index - 5]);\n\t\t\n\t\t// Insert new\n\t\tif (imgsInsert.length > 0) {\n\t\t\tweather.$.imgWrap.append(imgsInsert.join(\"\"));\n\t\t}\n\n\t\t// Remove old\n\t\tvar removes = [];\n\t\tfor (var i = 0; i < loadedUrls.length; i++) {\n\t\t\tvar url = loadedUrls[i];\n\t\t\tif (newUrls.indexOf(url) === -1) {\n\t\t\t\t$imgs.filter(\"[data-url='\" + url + \"']\").remove();\n\t\t\t\tremoves.push(i);\n\t\t\t}\n\t\t}\n\n\t\t// Store new\n\t\tloadedUrls = newUrls;\n\n\t\t// Mark selected\n\t\tweather.$.imgWrap.children().removeClass(\"selected\").filter(\"[data-url='\" + current.item.img_url + \"']\").addClass(\"selected\");\n\n\t\tfunction handleItem (item) {\n\t\t\tif (item) {\n\t\t\t\tnewUrls.push(item.img_url);\n\n\t\t\t\t// Not loaded\n\t\t\t\tif (loadedUrls.indexOf(item.img_url) === -1) {\n\t\t\t\t\timgsInsert.push(\"<div data-url='\" + item.img_url + \"' style='background-image: url(\" + ResolveImg(item.img_url) + \")' />\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}());\n\nvar scale = 1;  // scale of the image\nvar scaleLast = 1;\nvar xLast = 0;  // last x location on the screen\nvar yLast = 0;  // last y location on the screen\nvar xImage = 0; // last x location on the image\nvar yImage = 0; // last y location on the image\n\nfunction ResolveImg (src, checkStoredImage) {\n\t\n\tif (typeof checkStoredImage === \"undefined\") {\n\t\tcheckStoredImage = true;\n\t}\n\n\t// Not online. Use the image in the local storage if not online\n\tif (!navigator.onLine && checkStoredImage) {\n\t\tvar lastStored = data.getStoredImage();\n\t\tif (lastStored && lastStored.img === src) {\n\t\t\treturn lastStored.data;\n\t\t}\n\t\telse {\n\t\t\treturn \"/gfx/no-image.jpg\";\n\t\t}\n\t}\n\n\treturn \"http://www.vhsys.no/images/\" + src;\n}\n\nfunction GetCurrentIndex () {\n\treturn current.index;\n}\n\nfunction GetMaxIndex () {\n\treturn data.getCurrentLength() - 1;\n}\n\nfunction AtEnd () {\n\treturn current.index === (data.getCurrentLength() - 1);\n}\n\nmodule.exports = {\n\tpageLoad: PageLoad,\n\tload: Load,\n\tresolve: ResolveImg,\n\tloadSingle: LoadImage,\n\tgetCurrentIndex: GetCurrentIndex,\n\tgetMaxIndex: GetMaxIndex,\n\tatEnd: AtEnd\n};","var image = require('./image.js'),\n\tchart = require('./chart.js'),\n\tlayout = require('./layout.js'),\n\tdata = require('./data.js');\n\nvar current_index;\n//var changingImageWithTouch = false;\n\nfunction init () {\n\t$(function () {\n\n\t\t// Change section\n\t\tweather.onClick(weather.$.header.find(\"button\"), HeaderButtonClick);\n\n\t\t// Change chart types\n\t\tweather.onClick(weather.$.chart.find(\".types li\"), ChangeChartType);\n\n\t\tweather.$.w.resize(function () {\n\t\t\tlayout.resized();\n\t\t\tchart.load();\n\t\t});\n\n\t\t// Listen for change dates in a bit\n\t\tsetTimeout(function () {\n\t\t\tweather.$.dateFrom.add(weather.$.dateTo).change(function () {\n\t\t\t\tweather.setDates({\n\t\t\t\t\tfrom: weather.$.dateFrom.mobiscroll(\"getDate\"),\n\t\t\t\t\tto: weather.$.dateTo.mobiscroll(\"getDate\"),\n\t\t\t\t\tsetDateInputs: false\n\t\t\t\t});\n\t\t\t});\n\t\t}, 1000);\n\t});\n\n\ttouchEventsInit();\n}\n\nfunction touchEventsInit () {\n\n\tif (!image) {\n\t\tsetTimeout(touchEventsInit, 25);\n\t\treturn;\n\t}\n\n\t// Enable hammer on document.body\n\t//weather.hammerTimeBody = new Hammer(document.body);\n\n\tvar hammertimeImage = new Hammer.Manager(weather.$.image[0]);\n\n    hammertimeImage.add(new Hammer.Pan({ threshold: 5, pointers: 1 }));\n    //hammertimeImage.add(new Hammer.Tap({ event: 'doubletap', taps: 2 }));\n    //hammertimeImage.add(new Hammer.Swipe()).recognizeWith(hammertimeImage.get('pan'));\n    //hammertimeImage.add(new Hammer.Pinch({ threshold: 0 })).recognizeWith([mc.get('pan'), mc.get('rotate')]);\n\n    // Enable zoom\n\tzoom.init();\n\n\t// Stop any running slide animation\n\thammertimeImage.on(\"hammer.input\", function (e) {\n\t\te.preventDefault();\n\t\tclearTimeout(weather.slideOutTimeout);\n\t\tChangeImageIndexFromRangeSlider(e);\n\t});\n\n\t// Change snapshot\n    weather.lastx = -1;\n\n    hammertimeImage.on(\"panstart\", function (e) {\n\t\tif (!zoom.active() && !ChangeImageIndexFromRangeSlider(e)) {\n\t    \tcurrent_index = image.getCurrentIndex();\n\t    \t//changingImageWithTouch = true;\n\t    }\n    });\n\n    hammertimeImage.on(\"pan\", function (e) {\n    \tif (!zoom.active() && !ChangeImageIndexFromRangeSlider(e)) {\n\t    \t\t\n    \t\tvar x = e.pointers[0].pageX;\n    \t\tif (e.pointers.length === 2) {\n    \t\t\tx = e.center.x;\n    \t\t}\n\n    \t\tif (weather.lastx === -1) {\n    \t\t\tweather.lastx = x;\n    \t\t}\n    \t\t\n\t\t\tvar diff = x - weather.lastx;\n\n\t\t\tif (Math.abs(diff) >= 5) {\n\n\t\t\t\tcurrent_index = image.getCurrentIndex();\n\n\t\t\t\t//changing = true;\n\t\t\t\t\n\t\t\t\tif (diff > 0) {\n\t\t\t\t\tif (!image.atEnd()) {\n\t\t\t\t\t\t// Move 1 day up\n\t\t\t\t\t\tif (e.pointers.length === 2) {\n\t\t\t\t\t\t\timage.loadSingle(\"+1d\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n    \t\t\t\t\t\timage.loadSingle(current_index + 1);\n    \t\t\t\t\t}\n    \t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Move 1 day down\n\t\t\t\t\tif (e.pointers.length === 2) {\n\t\t\t\t\t\timage.loadSingle(\"-1d\");\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\timage.loadSingle(current_index - 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tweather.lastx = -1;\n\t\t\t}\n\t\t}\n\t});\n\n\thammertimeImage.on(\"panend\", function (e) {\n\t\tif (!zoom.active()) {\n\t    \tweather.lastx = -1;\n\n\t    \tvar duration = 1000,\n\t    \t\tstartIndex = image.getCurrentIndex(),\n\t    \t\tchangeInIndex = 25 * e.velocityX * -1,\n\t    \t\tdecreasing = changeInIndex < 0,\n\t    \t\ttimeStart = +new Date();\n\n\t    \tif (Math.abs(changeInIndex) > 3) {\n\t    \t\tslideNewImage();\n\t    \t}\n\t    }\n\n    \tfunction slideNewImage () {\n    \t\tvar now = +new Date();\n    \t\tvar time = now - timeStart;\n    \t\tvar newIndex = Math.easeOutExpo(time, startIndex, changeInIndex, duration);\n\n    \t\tnewIndex = decreasing ? Math.floor(newIndex) : Math.ceil(newIndex);\n    \t\t\n    \t\timage.loadSingle(newIndex);\n\n    \t\tif (time < duration) {\n\t    \t\tweather.slideOutTimeout = setTimeout(slideNewImage, 25);\n\t    \t}\n    \t}\n    });\n}\n\n// Switch active section\nfunction HeaderButtonClick () {\n\tvar $btn = $(this);\n\tif (!$btn.hasClass(\"selected\")) {\n\t\t\n\t\tswitch ($btn.data(\"action\")) {\n\t\t\tcase \"camera\":\n\t\t\t\tweather.$.sections.removeClass(\"show-chart\");\n\t\t\t\t$btn.addClass(\"selected\").siblings().removeClass(\"selected\");\n\t\t\t\tbreak;\n\t\t\tcase \"charts\":\n\t\t\t\tweather.$.sections.addClass(\"show-chart\");\n\t\t\t\t$btn.addClass(\"selected\").siblings().removeClass(\"selected\");\n\t\t\t\tbreak;\n\t\t\tcase \"refresh\":\n\t\t\t\tweather.refresh({\n\t\t\t\t\tforceGetFromApi: true\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n\nfunction ChangeImageIndexFromRangeSlider (e) {\n\tvar $target = $(e.target);\n\tvar x = Math.floor(e.pointers[0].pageX);\n\n\tif ($target.closest(weather.$.rangeWrap).length > 0) {\n\n\t\tvar rangeWidth = weather.vw - (32.5 * 2);\n\t\tvar rangeMargin = Math.ceil((weather.vw - rangeWidth) / 2);\n\t\t\n\t\tvar pctX = (x - rangeMargin) / rangeWidth;\n\t\tif (pctX < 0) {\n\t\t\tpctX = 0;\n\t\t}\n\t\tif (pctX > 100) {\n\t\t\tpctX = 100;\n\t\t}\n\n\t\tvar length = data.getCurrentLength();\n\t\tvar index = length * pctX;\n\n\t\timage.loadSingle(index);\n\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n// Switch active chart\nfunction ChangeChartType () {\n\tvar $btn = $(this);\n\t$btn.addClass(\"selected\").siblings().removeClass(\"selected\");\n\tsetTimeout(function () {\n\t\tchart.load($btn.data(\"type\"));\n\t}, 25);\n}\n\n// Zoom\nvar zoom = (function zoomInit() {\n\n\tlet $el;\n\n\t// Checks if zoom is active\n\tfunction active () {\n\t\tif (!$el) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet matrix = $el.panzoom('getMatrix');\n\t\treturn matrix[0] > 1;\n\t}\n\n\tfunction init () {\n\t\t$el = weather.$.imgWrap.children('div');\n\n\t\tif (!$el.length) {\n\t\t\treturn setTimeout(init, 25);\n\t\t}\n\n\t\t$el.panzoom({\n\t\t    startTransform: 'scale(1)',\n\t\t    increment: 1,\n\t\t    minScale: 1,\n\t\t    contain: 'invert',\n\t\t    transition: true\n\t\t});\n\n\t\t// Register a double tap zoom\n\t\tlet mc = new Hammer.Manager($el[0]);\n\t\tmc.add(new Hammer.Tap({\n\t\t\tevent: 'doubletap',\n\t\t\tthreshold: 5,\n\t\t\tinterval: 500,\n\t\t\ttime: 500,\n\t\t\ttaps: 2\n\t\t}));\n\t\tmc.on('doubletap', function onImgDoubleTap (event) {\n\t\t\t\n\t\t\t// Zoom out\n\t\t\tif (active()) {\n\t\t\t\t$el.panzoom('reset');\n\t\t\t}\n\t\t\t// Zoom in\n\t\t\telse {\n\t\t\t\t$el.panzoom('zoom', 3, {\n\t\t\t\t\tanimate: true,\n\t\t\t\t\tfocal: {\n\t\t\t\t\t\tclientX: event.center.x,\n\t\t\t\t\t\tclientY: event.center.y\n\t\t\t\t\t},\n\t\t\t\t\tsilent: false\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\treturn {\n\t\tinit,\n\t\tactive\n\t};\n}());\n\nmodule.exports = {\n\tinit\n};","function resize () {\n\twindow.scrollTo(0, 0);\n\n\tweather.vw = weather.$.w.width();\n\tweather.vh = window.innerHeight || weather.$.w.innerHeight();\n\n\tif (window.navigator.standalone) {\n\t\tweather.vh -= 20;\n\t}\n\n\tvar heightImageHeader = 51;\n\tvar heightImageRange = 45;\n\tvar heightChartButtons = 70;\n\tvar contentHeight = weather.vh - 50;\n\n\t// Set heights\n\tif (window.navigator.standalone) {\n\t\tweather.$.app.height(weather.vh + 20);\n\t}\n\telse {\n\t\tweather.$.app.height(weather.vh);\n\t}\n\tweather.$.sections.height(contentHeight);\n\n\t// Set height for image section\n\tweather.$.image.height(contentHeight);\n\tweather.$.imgWrap.height(contentHeight - heightImageHeader - heightImageRange);\n\n\tweather.$.chart.height(contentHeight);\n\tweather.$.chartContainer.height(contentHeight - heightChartButtons);\n\n\tif (!weather.firstResize) {\n\t\tweather.firstResize = weather.now();\n\t}\n}\n\n\nmodule.exports = {\n\tresized: function () {\n\t\tclearTimeout(weather.resizeTimeout);\n\t\tweather.resizeTimeout = setTimeout(resize, 50);\n\t}\n};","var data = require('./data.js'),\n\timage = require('./image.js'),\n\tchart = require('./chart.js'),\n\tlayout = require('./layout.js'),\n\tsettings = require('./settings.js'),\n\tinteractions = require('./interactions.js');\n\n// Default to not online if not set\nif (typeof navigator.onLine === 'undefined') {\n\tnavigator.onLine = false;\n}\n\nwindow.weather = (function () {\n\n\t// Make sure there is a place set\n\tvar hrefParts = location.href.split(\"/\");\n\tvar hrefPartLast = hrefParts[hrefParts.length - 1];\n\tif (hrefPartLast.length === 0 && hrefPartLast !== \"dev.html\") {\n\t\tvar div = document.createElement(\"div\");\n\t\tdiv.className = \"no-place-set\";\n\t\tdiv.innerHTML = \"<div class='logo'></div><h1>værhøna.no/[din-værhøne]</h1><div class='sub'>Skriv inn navnet på værhøna i adressefeltet</div>\";\n\t\tdocument.body.appendChild(div);\n\t\treturn;\n\t}\n\n    // Stores current items\n    var current = {\n    \titems: [],\n    \titems_index: 0\n    };\n\n\tif (window.navigator.standalone) {\n\t\t$(\"html\").addClass(\"standalone\");\n\t}\n\n\t// Handle cache\n    //StartCacheControl();\n\n    var blockingMessage = (function () {\n\n    \tlet $blockMsgImage,\n    \t\t$blockMsgChart;\n\n\t\tfunction show (message) {\n\t\t\tif (!$blockMsgImage) {\n\t\t\t\tlet template = `<div class='section-block-message'>${message}</div>`;\n\t\t\t\t$blockMsgImage = $(template);\n\t\t\t\t$blockMsgChart = $(template);\n\t\t\t\tweather.$.image.append($blockMsgImage);\n\t\t\t\tweather.$.chart.append($blockMsgChart);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t$blockMsgImage.html(message);\n\t\t\t\t$blockMsgChart.html(message);\n\t\t\t}\n\n\t\t\tweather.$.image.toggleClass(\"section-blocked\", true);\n\t\t\tweather.$.chart.toggleClass(\"section-blocked\", true);\n\t\t}\n\n\t\tfunction hide () {\n\t\t\tweather.$.image.find(\".section-block\").remove();\n\t\t\tweather.$.chart.find(\".section-block\").remove();\n\n\t\t\tweather.$.image.toggleClass(\"section-blocked\", false);\n\t\t\tweather.$.chart.toggleClass(\"section-blocked\", false);\n\t\t}\n\n\t\treturn {\n\t\t\tshow,\n\t\t\thide\n\t\t};\n\t}());\n\n    // Init\n    function startApp () {\n    \tif (window.weather && layout) {\n\n    \t\tsetTitle(settings.place);\n\n    \t\tCacheObjects();\n    \t\t\n    \t\tlayout.resized();\n    \t\t\n    \t\tinteractions.init();\n\n    \t\timage.pageLoad();\n\n    \t\tSetDates({\n    \t\t\tfrom: Now(-3),\n    \t\t\tto: Now()\n    \t\t});\n\n\t\t\t// Remove loader\n\t\t\tvar $loader = $(\"#app-loader\");\n\t\t\t$loader.css({ opacity: 0 });\n\n\t\t\tsetTimeout(function () {\n\t\t\t\t$loader.remove();\n\t\t\t}, 500);\n\t\t}\n\t\telse {\n\t\t\tsetTimeout(startApp, 50);\n\t\t}\n\t}\n\n\tfunction setTitle (title) {\n\t\ttitle = firstUpper(title);\n\n\t\tvar $head = $(\"head\"),\n\t\t\t$appTitle;\n\n\t\t$head.find(\"title\").html(title);\n\t\t\n\t\t$appTitle = $head.find(\"[name='apple-mobile-web-app-title']\");\n\t\tif ($appTitle.length > 0) {\n    \t\t$appTitle[0].content = title;\n    \t}\n\t}\n\n\tstartApp();\n\n\t/*function StartCacheControl () {\n\t\tvar appCache = window.applicationCache;\n\n\t\t// Bind listener\n\t\tappCache.addEventListener('updateready', CheckStatus, false);\n\n\t\tCheckStatus();\n\n\t\tfunction CheckStatus () {\n\t\t\tif (appCache.status === appCache.UPDATEREADY) {\n\t\t\t  // Don't prompt user. Maybe do like Chrome does and indicate the new version in a settings page?\n\t\t      if (confirm('En ny versjon av værstasjonen er klar. Vil du hente den nå?')) {\n\t\t        window.location.reload();\n\t\t      }\n\t\t    }\n\t\t}\n\t}*/\n\n\tfunction CacheObjects () {\n\n\t\tweather.$ = weather.$ || {};\n\n\t\t$.extend(weather.$, {\n\t\t\tw: $(window),\n\t\t\tapp: $(\"#app\"),\n\t\t\theader: $(\"#site-header\"),\n\t\t\tdateFrom: $(\"#date-from\"),\n\t\t\tdateTo: $(\"#date-to\"),\n\t\t\trangeWrap: $(\"#range-wrap\"),\n\t\t\trangeKw: $(\"#range-kw\"),\n\t\t\trange: $(\"#range\"),\n\t\t\tchartTemperature: $(\"#chart-temperature\"),\n\t\t\tchartHumidity: $(\"#chart-humidity\"),\n\t\t\tchartPressure: $(\"#chart-pressure\"),\n\t\t\tsections: $(\"#sections\"),\n\t\t\timage: $(\"#image\"),\n\t\t\timgWrap: $(\"#img-wrap\"),\n\t\t\timgDate: $(\"#img-date\"),\n\t\t\timgWeather: $(\"#img-weather\"),\n\t\t\tchart: $(\"#chart\"),\n\t\t\tchartContainer: $(\"#chart-canvas-container\")\n\t\t});\n\t}\n\n\tfunction BindMobiScroll (opt) {\n\t\t\n\t\tweather.$.dateFrom.mobiscroll(\"destroy\");\n\t\tweather.$.dateFrom.mobiscroll().date({\n\t\t\tlang: \"no\",\n\t\t\tdateFormat: \"d/m/y\",\n\t\t\tdateOrder: \"D ddMMyy\",\n\t\t\tmaxDate: opt.to,\n\t\t\tminDate: opt.fromMin\n\t\t});\n\n\t\tweather.$.dateTo.mobiscroll(\"destroy\");\n\t\tweather.$.dateTo.mobiscroll().date({\n\t\t\tlang: \"no\",\n\t\t\tdateFormat: \"d/m/y\",\n\t\t\tdateOrder: \"D ddMMyy\",\n\t\t\tminDate: opt.from\n\t\t});\n\t}\n\n\tfunction SetMinimumDate (date) {\n\t\tBindMobiScroll({\n\t\t\tfrom: weather.$.dateFrom.mobiscroll(\"getDate\"),\n\t\t\tto: weather.$.dateTo.mobiscroll(\"getDate\"),\n\t\t\tfromMin: date\n\t\t});\n\t}\n\n\t// Check if given date is the todays date\n\tfunction isToday (date) {\n\t\tvar now = Now();\n\n\t\treturn date.getFullYear() === now.getFullYear() &&\n\t\t\t   date.getMonth() === now.getMonth() &&\n\t\t\t   date.getDate() === now.getDate();\n\t}\n\n\tfunction needsUpdate () {\n\t\t\n\t\tif (!weather.onToday) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar now = Now();\n\t\tvar now_raw = new Date();\n\n\t\tnow.setHours(now_raw.getHours());\n\n\t\treturn now > weather.to;\n\t}\n\n\t// Date helper\n\tfunction Now (addDays) {\n\t\tvar now = new Date();\n\t\tnow.setHours(0);\n\t\tnow.setMinutes(0);\n\t\tnow.setSeconds(0);\n\t\tnow.setMilliseconds(0);\n\n\t\tif (addDays) {\n\t\t\tnow.setDate(now.getDate() + addDays);\n\t\t}\n\n\t\treturn now;\n\t}\n\n\tfunction GetCurrent () {\n\t\treturn current;\n\t}\n\n\t// Set the from and to date and update data\n\tfunction SetDates (options) {\n\t\t\n\t\tif (typeof options.setDateInputs === \"undefined\") {\n\t\t\toptions.setDateInputs = true;\n\t\t}\n\n\t\tBindMobiScroll({\n\t\t\tfrom: options.from,\n\t\t\tto: options.to\n\t\t});\n\n\t\tvar deferred = $.Deferred();\n\n\t\tif (options.setDateInputs) {\n\t\t\tweather.$.dateFrom.mobiscroll(\"setDate\", options.from, true);\n\t\t\tweather.$.dateTo.mobiscroll(\"setDate\", options.to, true);\n\t\t}\n\n\t\t// Check if the to date is today\n\t\tweather.onToday = isToday(options.to);\n\n\t\tif (weather.onToday) {\n\t\t\tvar now = new Date();\n\t\t\toptions.to.setHours(now.getHours());\n\t\t\toptions.to.setMinutes(now.getMinutes());\n\t\t}\n\n\t\t// Store current\n\t\tweather.from = options.from;\n\t\tweather.to = options.to;\n\n\t\tvar getOptions = {\n\t\t\t from: options.from,\n\t\t\t to: options.to,\n\t\t\t forceGetFromApi: options.forceGetFromApi\n\t\t};\n\n\t\t// Get data and update image and chart\n\t\tdata.get(getOptions).then(function (snapshots) {\n\n\t\t\tif (snapshots.length === 0) {\n\t\t\t\tblockingMessage.show(\"Ingen værdata registrert i perioden <span class='dates'>\" + PrettyDate(options.from, \"no-time\") + \" til \" + PrettyDate(options.to, \"no-time\") + \"</span>\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\tblockingMessage.hide();\n\n\t\t\t\timage.load();\n\t\t\t\t\n\t\t\t\t// Wait some before loading charts\n\t\t\t\tsetTimeout(chart.load, 500);\n\t\t\t\t\n\t\t\t\tif (options.moveToEnd) {\n\t\t\t\t\tvar index = image.getMaxIndex();\n\t\t\t\t\timage.loadSingle(index);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdeferred.resolve();\n\n\t\t\ttrackPageView();\n\t\t});\n\t\t\n\t\treturn deferred;\n\t}\n\t\n\tfunction refresh (options) {\n\n\t\toptions = options || {};\n\n\t\t// Show loading indication\n\t\tweather.loading();\n\n\t\t// Wait for a bit before actually getting new data.\n\t\t// It is important to show some loading indication to the user\n\t\tsetTimeout(function () {\n\t\t\tvar from = weather.$.dateFrom.mobiscroll(\"getDate\"),\n\t\t\t\tto = weather.$.dateTo.mobiscroll(\"getDate\");\n\t\t\t\n\t\t\tif (weather.onToday && !isToday(to)) {\n\t\t\t\tSetDates({\n\t\t\t\t\tfrom: from,\n\t\t\t\t\tto: Now(),\n\t\t\t\t\tsetDateInputs: true,\n\t\t\t\t\tmoveToEnd: image.atEnd(),\n\t\t\t\t\tforceGetFromApi: options.forceGetFromApi\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tSetDates({\n\t\t\t\tfrom: from,\n\t\t\t\tto: to,\n\t\t\t\tsetDateInputs: false,\n\t\t\t\tmoveToEnd: image.atEnd(),\n\t\t\t\tforceGetFromApi: options.forceGetFromApi\n\t\t\t});\n\t\t}, 500);\n\t}\n\n\t// Handle document focus\n\t(function () {\n\t\tvar hasFocus = document.hasFocus();\n\n\t\tsetInterval(checkDocumentFocus, 500);\n\n\t\tfunction checkDocumentFocus () {\n\t\t\tvar focus = document.hasFocus();\n\n\t\t\t// Refresh if regaining focus\n\t\t\tif (!hasFocus && focus) {\n\t\t\t\t\n\t\t\t\t// Last refresh must be more than 1 minute old\n\t\t\t\tif (needsUpdate()) {\n\t\t\t\t\trefresh();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thasFocus = focus;\n\t\t}\n\n\t\treturn {\n\t\t\tcheckDocumentFocus\n\t\t};\n\t}());\n\n\t// Pads number with given digits\n\tfunction EnsureDigits (num, digits) {\n\t\tnum = num.toString();\n\t\tvar incr = digits - num.length;\n\t\tfor (var i = 0; i < incr; i++) {\n\t\t\tnum = \"0\" + num;\n\t\t}\n\t\treturn num;\n\t}\n\n\t// Returns a pretty date string from date\n\tfunction PrettyDate (date, format) {\n\t\t\n\t\tvar weekDays = [\"Søndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lørdag\"];\n\t\tvar weekDays_short = [\"Sø.\", \"Ma.\", \"Ti.\", \"On.\", \"To.\", \"Fr.\", \"Lø.\"];\n\t\tvar months = [\"Januar\", \"Februar\", \"Mars\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Desember\"];\n\t\tvar months_short = [\"Jan.\", \"Feb.\", \"Mar.\", \"Apr.\", \"Mai\", \"Juni\", \"Juli\", \"Aug.\", \"Sep.\", \"Okt.\", \"Nov.\", \"Des.\"];\n\n\t\tformat = format || \"full\";\n\n\t\tif (format === \"short\") {\n\t\t\tweekDays = weekDays_short;\n\t\t\tmonths = months_short;\n\t\t}\n\n\t\tvar day = weekDays[date.getDay()] + \" \" + date.getDate() + \". \" + months[date.getMonth()].toLowerCase() + \" \" + date.getFullYear();\n\t\tvar time = Time(date);\n\n\t\tif (format === \"no-time\") {\n\t\t\treturn day;\n\t\t}\n\n\t\treturn day + \" <span>\" + time + \"</span>\";\n\t}\n\n\t// Returns a short date string from date\n\tfunction ShortDate (dt) {\n\t\tvar year = dt.getFullYear().toString();\n\t\treturn dt.getDate() + \"/\" + (dt.getMonth() + 1) + \"/\" + year[2].toString() + year[3].toString();\n\t}\n\n\tfunction ShortDateTime (date) {\n\t\treturn ShortDate(date) + \" <span>\" + Time(date) + \"</span>\";\n\t}\n\n\tfunction Time (date, seconds) {\n\t\tvar timePart = EnsureDigits(date.getHours(), 2) + \":\" + EnsureDigits(date.getMinutes(), 2);\n\t\t\n\t\tif (seconds) {\n\t\t\treturn timePart + \":\" + EnsureDigits(date.getSeconds(), 2);\n\t\t}\n\n\t\treturn timePart;\n\t}\n\n\t// Shorthand for better click\n\tfunction OnClick ($el, fn) {\n\t\t$el.each(function () {\n\t\t\tvar $this = $(this);\n\t\t\tvar hm = new Hammer(this);\n\n\t\t\thm.get(\"press\").set({\n\t\t\t\ttime: 1,\n\t\t\t\tthreshold: 100\n\t\t\t});\n\t\t\t\n\t\t\thm.on(\"press\", function (e) {\n\t\t\t\tfn.call($this[0], e);\n\t\t\t});\n\n\t\t\t$this.click(prevDef);\n\t\t});\n\t}\n\n\tfunction prevDef (e) {\n\t\te.preventDefault();\n\t}\n\n\tfunction loading (hide) {\n\t\tvar $btn = weather.$.header.find(\".ico[data-action='refresh']\");\n\t\t\n\t\tif (hide === false) {\n\t\t\t$btn.removeClass(\"spin\");\n\t\t}\n\t\telse {\n\t\t\t$btn.addClass(\"spin\");\n\t\t}\n\t}\n\n\tfunction firstUpper (str) {\n\t\tif (!str || str.length < 1) {\n\t\t\treturn str;\n\t\t}\n\n\t\tvar first = str[0].toUpperCase();\n\n\t\treturn first + str.substr(1);\n\t}\n\n\t// Track page view\n\tfunction trackPageView () {\n\n\t\tif (!weather.addedGA) {\n\t\t\tweather.addedGA = +new Date();\n\n\t\t\tinsertGA();\n\n\t\t\tga('create', 'UA-61711833-1', 'auto');\n\t\t}\n\t\t\n\t\tga('send', 'pageview');\n\t}\n\n\treturn {\n\t\tnow: Now,\n\t\tonClick: OnClick,\n\t\tsetDates: SetDates,\n\t\tshortDate: ShortDate,\n\t\tshortDateTime: ShortDateTime,\n\t\tprettyDate: PrettyDate,\n\t\tsetMinimumDate: SetMinimumDate,\n\t\ttime: Time,\n\t\tensureDigits: EnsureDigits,\n\t\tgetCurrent: GetCurrent,\n\t\tloading: loading,\n\t\tneedsUpdate: needsUpdate,\n\t\t$: {},\n\t\timageWidth: 640,\n\t\timageHeight: 480,\n\t\trefresh\n\t};\n\n})();","module.exports = (function () {\n\n\t// App settings\n\tvar settings_default = {\n\t\tlocalStorageKey: \"vhsys\",\n\t\tplace: false,\n\t\tappVersion: 2\n\t};\n\n\t// Todo: get from localstorage\n\tvar settings = settings_default;\n\t//if (!settings.appVersion) {\n\t//\tlocalStorage.clear();\n\t//}\n\n\t// Get place name\n\tvar locationParts = window.location.href.split(\"/\");\n\tif (locationParts.length > 1) {\n\t\tsettings.place = locationParts[locationParts.length - 1];\n\t}\n\n\tif (settings.place.indexOf(\"dev.html\") !== -1) {\n\t\tsettings.place = \"buvassbrenna\";\n\t}\n\n\t// Set to false if it is empty\n\tsettings.place = settings.place.length > 0 ? settings.place : false;\n\n\treturn settings;\n}());","/*!\n * imagesLoaded v3.1.8\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n\n( function( window, factory ) { 'use strict';\n  // universal module definition\n\n  /*global define: false, module: false, require: false */\n\n  if ( typeof define === 'function' && define.amd ) {\n    // AMD\n    define( [\n      'eventEmitter/EventEmitter',\n      'eventie/eventie'\n    ], function( EventEmitter, eventie ) {\n      return factory( window, EventEmitter, eventie );\n    });\n  } else if ( typeof exports === 'object' ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('wolfy87-eventemitter'),\n      require('eventie')\n    );\n  } else {\n    // browser global\n    window.imagesLoaded = factory(\n      window,\n      window.EventEmitter,\n      window.eventie\n    );\n  }\n\n})( window,\n\n// --------------------------  factory -------------------------- //\n\nfunction factory( window, EventEmitter, eventie ) {\n\n'use strict';\n\nvar $ = window.jQuery;\nvar console = window.console;\nvar hasConsole = typeof console !== 'undefined';\n\n// -------------------------- helpers -------------------------- //\n\n// extend objects\nfunction extend( a, b ) {\n  for ( var prop in b ) {\n    a[ prop ] = b[ prop ];\n  }\n  return a;\n}\n\nvar objToString = Object.prototype.toString;\nfunction isArray( obj ) {\n  return objToString.call( obj ) === '[object Array]';\n}\n\n// turn element or nodeList into an array\nfunction makeArray( obj ) {\n  var ary = [];\n  if ( isArray( obj ) ) {\n    // use object if already an array\n    ary = obj;\n  } else if ( typeof obj.length === 'number' ) {\n    // convert nodeList to array\n    for ( var i=0, len = obj.length; i < len; i++ ) {\n      ary.push( obj[i] );\n    }\n  } else {\n    // array of single index\n    ary.push( obj );\n  }\n  return ary;\n}\n\n  // -------------------------- imagesLoaded -------------------------- //\n\n  /**\n   * @param {Array, Element, NodeList, String} elem\n   * @param {Object or Function} options - if function, use as callback\n   * @param {Function} onAlways - callback function\n   */\n  function ImagesLoaded( elem, options, onAlways ) {\n    // coerce ImagesLoaded() without new, to be new ImagesLoaded()\n    if ( !( this instanceof ImagesLoaded ) ) {\n      return new ImagesLoaded( elem, options );\n    }\n    // use elem as selector string\n    if ( typeof elem === 'string' ) {\n      elem = document.querySelectorAll( elem );\n    }\n\n    this.elements = makeArray( elem );\n    this.options = extend( {}, this.options );\n\n    if ( typeof options === 'function' ) {\n      onAlways = options;\n    } else {\n      extend( this.options, options );\n    }\n\n    if ( onAlways ) {\n      this.on( 'always', onAlways );\n    }\n\n    this.getImages();\n\n    if ( $ ) {\n      // add jQuery Deferred object\n      this.jqDeferred = new $.Deferred();\n    }\n\n    // HACK check async to allow time to bind listeners\n    var _this = this;\n    setTimeout( function() {\n      _this.check();\n    });\n  }\n\n  ImagesLoaded.prototype = new EventEmitter();\n\n  ImagesLoaded.prototype.options = {};\n\n  ImagesLoaded.prototype.getImages = function() {\n    this.images = [];\n\n    // filter & find items if we have an item selector\n    for ( var i=0, len = this.elements.length; i < len; i++ ) {\n      var elem = this.elements[i];\n      // filter siblings\n      if ( elem.nodeName === 'IMG' ) {\n        this.addImage( elem );\n      }\n      // find children\n      // no non-element nodes, #143\n      var nodeType = elem.nodeType;\n      if ( !nodeType || !( nodeType === 1 || nodeType === 9 || nodeType === 11 ) ) {\n        continue;\n      }\n      var childElems = elem.querySelectorAll('img');\n      // concat childElems to filterFound array\n      for ( var j=0, jLen = childElems.length; j < jLen; j++ ) {\n        var img = childElems[j];\n        this.addImage( img );\n      }\n    }\n  };\n\n  /**\n   * @param {Image} img\n   */\n  ImagesLoaded.prototype.addImage = function( img ) {\n    var loadingImage = new LoadingImage( img );\n    this.images.push( loadingImage );\n  };\n\n  ImagesLoaded.prototype.check = function() {\n    var _this = this;\n    var checkedCount = 0;\n    var length = this.images.length;\n    this.hasAnyBroken = false;\n    // complete if no images\n    if ( !length ) {\n      this.complete();\n      return;\n    }\n\n    function onConfirm( image, message ) {\n      if ( _this.options.debug && hasConsole ) {\n        console.log( 'confirm', image, message );\n      }\n\n      _this.progress( image );\n      checkedCount++;\n      if ( checkedCount === length ) {\n        _this.complete();\n      }\n      return true; // bind once\n    }\n\n    for ( var i=0; i < length; i++ ) {\n      var loadingImage = this.images[i];\n      loadingImage.on( 'confirm', onConfirm );\n      loadingImage.check();\n    }\n  };\n\n  ImagesLoaded.prototype.progress = function( image ) {\n    this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\n    // HACK - Chrome triggers event before object properties have changed. #83\n    var _this = this;\n    setTimeout( function() {\n      _this.emit( 'progress', _this, image );\n      if ( _this.jqDeferred && _this.jqDeferred.notify ) {\n        _this.jqDeferred.notify( _this, image );\n      }\n    });\n  };\n\n  ImagesLoaded.prototype.complete = function() {\n    var eventName = this.hasAnyBroken ? 'fail' : 'done';\n    this.isComplete = true;\n    var _this = this;\n    // HACK - another setTimeout so that confirm happens after progress\n    setTimeout( function() {\n      _this.emit( eventName, _this );\n      _this.emit( 'always', _this );\n      if ( _this.jqDeferred ) {\n        var jqMethod = _this.hasAnyBroken ? 'reject' : 'resolve';\n        _this.jqDeferred[ jqMethod ]( _this );\n      }\n    });\n  };\n\n  // -------------------------- jquery -------------------------- //\n\n  if ( $ ) {\n    $.fn.imagesLoaded = function( options, callback ) {\n      var instance = new ImagesLoaded( this, options, callback );\n      return instance.jqDeferred.promise( $(this) );\n    };\n  }\n\n\n  // --------------------------  -------------------------- //\n\n  function LoadingImage( img ) {\n    this.img = img;\n  }\n\n  LoadingImage.prototype = new EventEmitter();\n\n  LoadingImage.prototype.check = function() {\n    // first check cached any previous images that have same src\n    var resource = cache[ this.img.src ] || new Resource( this.img.src );\n    if ( resource.isConfirmed ) {\n      this.confirm( resource.isLoaded, 'cached was confirmed' );\n      return;\n    }\n\n    // If complete is true and browser supports natural sizes,\n    // try to check for image status manually.\n    if ( this.img.complete && this.img.naturalWidth !== undefined ) {\n      // report based on naturalWidth\n      this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n      return;\n    }\n\n    // If none of the checks above matched, simulate loading on detached element.\n    var _this = this;\n    resource.on( 'confirm', function( resrc, message ) {\n      _this.confirm( resrc.isLoaded, message );\n      return true;\n    });\n\n    resource.check();\n  };\n\n  LoadingImage.prototype.confirm = function( isLoaded, message ) {\n    this.isLoaded = isLoaded;\n    this.emit( 'confirm', this, message );\n  };\n\n  // -------------------------- Resource -------------------------- //\n\n  // Resource checks each src, only once\n  // separate class from LoadingImage to prevent memory leaks. See #115\n\n  var cache = {};\n\n  function Resource( src ) {\n    this.src = src;\n    // add to cache\n    cache[ src ] = this;\n  }\n\n  Resource.prototype = new EventEmitter();\n\n  Resource.prototype.check = function() {\n    // only trigger checking once\n    if ( this.isChecked ) {\n      return;\n    }\n    // simulate loading on detached element\n    var proxyImage = new Image();\n    eventie.bind( proxyImage, 'load', this );\n    eventie.bind( proxyImage, 'error', this );\n    proxyImage.src = this.src;\n    // set flag\n    this.isChecked = true;\n  };\n\n  // ----- events ----- //\n\n  // trigger specified handler for event type\n  Resource.prototype.handleEvent = function( event ) {\n    var method = 'on' + event.type;\n    if ( this[ method ] ) {\n      this[ method ]( event );\n    }\n  };\n\n  Resource.prototype.onload = function( event ) {\n    this.confirm( true, 'onload' );\n    this.unbindProxyEvents( event );\n  };\n\n  Resource.prototype.onerror = function( event ) {\n    this.confirm( false, 'onerror' );\n    this.unbindProxyEvents( event );\n  };\n\n  // ----- confirm ----- //\n\n  Resource.prototype.confirm = function( isLoaded, message ) {\n    this.isConfirmed = true;\n    this.isLoaded = isLoaded;\n    this.emit( 'confirm', this, message );\n  };\n\n  Resource.prototype.unbindProxyEvents = function( event ) {\n    eventie.unbind( event.target, 'load', this );\n    eventie.unbind( event.target, 'error', this );\n  };\n\n  // -----  ----- //\n\n  return ImagesLoaded;\n\n});\n","/*!\n * eventie v1.0.6\n * event binding helper\n *   eventie.bind( elem, 'click', myFn )\n *   eventie.unbind( elem, 'click', myFn )\n * MIT license\n */\n\n/*jshint browser: true, undef: true, unused: true */\n/*global define: false, module: false */\n\n( function( window ) {\n\n'use strict';\n\nvar docElem = document.documentElement;\n\nvar bind = function() {};\n\nfunction getIEEvent( obj ) {\n  var event = window.event;\n  // add event.target\n  event.target = event.target || event.srcElement || obj;\n  return event;\n}\n\nif ( docElem.addEventListener ) {\n  bind = function( obj, type, fn ) {\n    obj.addEventListener( type, fn, false );\n  };\n} else if ( docElem.attachEvent ) {\n  bind = function( obj, type, fn ) {\n    obj[ type + fn ] = fn.handleEvent ?\n      function() {\n        var event = getIEEvent( obj );\n        fn.handleEvent.call( fn, event );\n      } :\n      function() {\n        var event = getIEEvent( obj );\n        fn.call( obj, event );\n      };\n    obj.attachEvent( \"on\" + type, obj[ type + fn ] );\n  };\n}\n\nvar unbind = function() {};\n\nif ( docElem.removeEventListener ) {\n  unbind = function( obj, type, fn ) {\n    obj.removeEventListener( type, fn, false );\n  };\n} else if ( docElem.detachEvent ) {\n  unbind = function( obj, type, fn ) {\n    obj.detachEvent( \"on\" + type, obj[ type + fn ] );\n    try {\n      delete obj[ type + fn ];\n    } catch ( err ) {\n      // can't delete window object properties\n      obj[ type + fn ] = undefined;\n    }\n  };\n}\n\nvar eventie = {\n  bind: bind,\n  unbind: unbind\n};\n\n// ----- module definition ----- //\n\nif ( typeof define === 'function' && define.amd ) {\n  // AMD\n  define( eventie );\n} else if ( typeof exports === 'object' ) {\n  // CommonJS\n  module.exports = eventie;\n} else {\n  // browser global\n  window.eventie = eventie;\n}\n\n})( window );\n","/*!\n * EventEmitter v4.2.11 - git.io/ee\n * Unlicense - http://unlicense.org/\n * Oliver Caldwell - http://oli.me.uk/\n * @preserve\n */\n\n;(function () {\n    'use strict';\n\n    /**\n     * Class for managing events.\n     * Can be extended to provide event functionality in other classes.\n     *\n     * @class EventEmitter Manages event registering and emitting.\n     */\n    function EventEmitter() {}\n\n    // Shortcuts to improve speed and size\n    var proto = EventEmitter.prototype;\n    var exports = this;\n    var originalGlobalValue = exports.EventEmitter;\n\n    /**\n     * Finds the index of the listener for the event in its storage array.\n     *\n     * @param {Function[]} listeners Array of listeners to search through.\n     * @param {Function} listener Method to look for.\n     * @return {Number} Index of the specified listener, -1 if not found\n     * @api private\n     */\n    function indexOfListener(listeners, listener) {\n        var i = listeners.length;\n        while (i--) {\n            if (listeners[i].listener === listener) {\n                return i;\n            }\n        }\n\n        return -1;\n    }\n\n    /**\n     * Alias a method while keeping the context correct, to allow for overwriting of target method.\n     *\n     * @param {String} name The name of the target method.\n     * @return {Function} The aliased method\n     * @api private\n     */\n    function alias(name) {\n        return function aliasClosure() {\n            return this[name].apply(this, arguments);\n        };\n    }\n\n    /**\n     * Returns the listener array for the specified event.\n     * Will initialise the event object and listener arrays if required.\n     * Will return an object if you use a regex search. The object contains keys for each matched event. So /ba[rz]/ might return an object containing bar and baz. But only if you have either defined them with defineEvent or added some listeners to them.\n     * Each property in the object response is an array of listener functions.\n     *\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\n     * @return {Function[]|Object} All listener functions for the event.\n     */\n    proto.getListeners = function getListeners(evt) {\n        var events = this._getEvents();\n        var response;\n        var key;\n\n        // Return a concatenated array of all matching events if\n        // the selector is a regular expression.\n        if (evt instanceof RegExp) {\n            response = {};\n            for (key in events) {\n                if (events.hasOwnProperty(key) && evt.test(key)) {\n                    response[key] = events[key];\n                }\n            }\n        }\n        else {\n            response = events[evt] || (events[evt] = []);\n        }\n\n        return response;\n    };\n\n    /**\n     * Takes a list of listener objects and flattens it into a list of listener functions.\n     *\n     * @param {Object[]} listeners Raw listener objects.\n     * @return {Function[]} Just the listener functions.\n     */\n    proto.flattenListeners = function flattenListeners(listeners) {\n        var flatListeners = [];\n        var i;\n\n        for (i = 0; i < listeners.length; i += 1) {\n            flatListeners.push(listeners[i].listener);\n        }\n\n        return flatListeners;\n    };\n\n    /**\n     * Fetches the requested listeners via getListeners but will always return the results inside an object. This is mainly for internal use but others may find it useful.\n     *\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\n     * @return {Object} All listener functions for an event in an object.\n     */\n    proto.getListenersAsObject = function getListenersAsObject(evt) {\n        var listeners = this.getListeners(evt);\n        var response;\n\n        if (listeners instanceof Array) {\n            response = {};\n            response[evt] = listeners;\n        }\n\n        return response || listeners;\n    };\n\n    /**\n     * Adds a listener function to the specified event.\n     * The listener will not be added if it is a duplicate.\n     * If the listener returns true then it will be removed after it is called.\n     * If you pass a regular expression as the event name then the listener will be added to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addListener = function addListener(evt, listener) {\n        var listeners = this.getListenersAsObject(evt);\n        var listenerIsWrapped = typeof listener === 'object';\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key) && indexOfListener(listeners[key], listener) === -1) {\n                listeners[key].push(listenerIsWrapped ? listener : {\n                    listener: listener,\n                    once: false\n                });\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of addListener\n     */\n    proto.on = alias('addListener');\n\n    /**\n     * Semi-alias of addListener. It will add a listener that will be\n     * automatically removed after its first execution.\n     *\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addOnceListener = function addOnceListener(evt, listener) {\n        return this.addListener(evt, {\n            listener: listener,\n            once: true\n        });\n    };\n\n    /**\n     * Alias of addOnceListener.\n     */\n    proto.once = alias('addOnceListener');\n\n    /**\n     * Defines an event name. This is required if you want to use a regex to add a listener to multiple events at once. If you don't do this then how do you expect it to know what event to add to? Should it just add to every possible match for a regex? No. That is scary and bad.\n     * You need to tell it what event names should be matched by a regex.\n     *\n     * @param {String} evt Name of the event to create.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.defineEvent = function defineEvent(evt) {\n        this.getListeners(evt);\n        return this;\n    };\n\n    /**\n     * Uses defineEvent to define multiple events.\n     *\n     * @param {String[]} evts An array of event names to define.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.defineEvents = function defineEvents(evts) {\n        for (var i = 0; i < evts.length; i += 1) {\n            this.defineEvent(evts[i]);\n        }\n        return this;\n    };\n\n    /**\n     * Removes a listener function from the specified event.\n     * When passed a regular expression as the event name, it will remove the listener from all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to remove the listener from.\n     * @param {Function} listener Method to remove from the event.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeListener = function removeListener(evt, listener) {\n        var listeners = this.getListenersAsObject(evt);\n        var index;\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key)) {\n                index = indexOfListener(listeners[key], listener);\n\n                if (index !== -1) {\n                    listeners[key].splice(index, 1);\n                }\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of removeListener\n     */\n    proto.off = alias('removeListener');\n\n    /**\n     * Adds listeners in bulk using the manipulateListeners method.\n     * If you pass an object as the second argument you can add to multiple events at once. The object should contain key value pairs of events and listeners or listener arrays. You can also pass it an event name and an array of listeners to be added.\n     * You can also pass it a regular expression to add the array of listeners to all events that match it.\n     * Yeah, this function does quite a bit. That's probably a bad thing.\n     *\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add to multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to add.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addListeners = function addListeners(evt, listeners) {\n        // Pass through to manipulateListeners\n        return this.manipulateListeners(false, evt, listeners);\n    };\n\n    /**\n     * Removes listeners in bulk using the manipulateListeners method.\n     * If you pass an object as the second argument you can remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n     * You can also pass it an event name and an array of listeners to be removed.\n     * You can also pass it a regular expression to remove the listeners from all events that match it.\n     *\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to remove from multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to remove.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeListeners = function removeListeners(evt, listeners) {\n        // Pass through to manipulateListeners\n        return this.manipulateListeners(true, evt, listeners);\n    };\n\n    /**\n     * Edits listeners in bulk. The addListeners and removeListeners methods both use this to do their job. You should really use those instead, this is a little lower level.\n     * The first argument will determine if the listeners are removed (true) or added (false).\n     * If you pass an object as the second argument you can add/remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n     * You can also pass it an event name and an array of listeners to be added/removed.\n     * You can also pass it a regular expression to manipulate the listeners of all events that match it.\n     *\n     * @param {Boolean} remove True if you want to remove listeners, false if you want to add.\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add/remove from multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to add/remove.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.manipulateListeners = function manipulateListeners(remove, evt, listeners) {\n        var i;\n        var value;\n        var single = remove ? this.removeListener : this.addListener;\n        var multiple = remove ? this.removeListeners : this.addListeners;\n\n        // If evt is an object then pass each of its properties to this method\n        if (typeof evt === 'object' && !(evt instanceof RegExp)) {\n            for (i in evt) {\n                if (evt.hasOwnProperty(i) && (value = evt[i])) {\n                    // Pass the single listener straight through to the singular method\n                    if (typeof value === 'function') {\n                        single.call(this, i, value);\n                    }\n                    else {\n                        // Otherwise pass back to the multiple function\n                        multiple.call(this, i, value);\n                    }\n                }\n            }\n        }\n        else {\n            // So evt must be a string\n            // And listeners must be an array of listeners\n            // Loop over it and pass each one to the multiple method\n            i = listeners.length;\n            while (i--) {\n                single.call(this, evt, listeners[i]);\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Removes all listeners from a specified event.\n     * If you do not specify an event then all listeners will be removed.\n     * That means every event will be emptied.\n     * You can also pass a regex to remove all events that match it.\n     *\n     * @param {String|RegExp} [evt] Optional name of the event to remove all listeners for. Will remove from every event if not passed.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeEvent = function removeEvent(evt) {\n        var type = typeof evt;\n        var events = this._getEvents();\n        var key;\n\n        // Remove different things depending on the state of evt\n        if (type === 'string') {\n            // Remove all listeners for the specified event\n            delete events[evt];\n        }\n        else if (evt instanceof RegExp) {\n            // Remove all events matching the regex.\n            for (key in events) {\n                if (events.hasOwnProperty(key) && evt.test(key)) {\n                    delete events[key];\n                }\n            }\n        }\n        else {\n            // Remove all listeners in all events\n            delete this._events;\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of removeEvent.\n     *\n     * Added to mirror the node API.\n     */\n    proto.removeAllListeners = alias('removeEvent');\n\n    /**\n     * Emits an event of your choice.\n     * When emitted, every listener attached to that event will be executed.\n     * If you pass the optional argument array then those arguments will be passed to every listener upon execution.\n     * Because it uses `apply`, your array of arguments will be passed as if you wrote them out separately.\n     * So they will not arrive within the array on the other side, they will be separate.\n     * You can also pass a regular expression to emit to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n     * @param {Array} [args] Optional array of arguments to be passed to each listener.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.emitEvent = function emitEvent(evt, args) {\n        var listeners = this.getListenersAsObject(evt);\n        var listener;\n        var i;\n        var key;\n        var response;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key)) {\n                i = listeners[key].length;\n\n                while (i--) {\n                    // If the listener returns true then it shall be removed from the event\n                    // The function is executed either with a basic call or an apply if there is an args array\n                    listener = listeners[key][i];\n\n                    if (listener.once === true) {\n                        this.removeListener(evt, listener.listener);\n                    }\n\n                    response = listener.listener.apply(this, args || []);\n\n                    if (response === this._getOnceReturnValue()) {\n                        this.removeListener(evt, listener.listener);\n                    }\n                }\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of emitEvent\n     */\n    proto.trigger = alias('emitEvent');\n\n    /**\n     * Subtly different from emitEvent in that it will pass its arguments on to the listeners, as opposed to taking a single array of arguments to pass on.\n     * As with emitEvent, you can pass a regex in place of the event name to emit to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n     * @param {...*} Optional additional arguments to be passed to each listener.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.emit = function emit(evt) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        return this.emitEvent(evt, args);\n    };\n\n    /**\n     * Sets the current value to check against when executing listeners. If a\n     * listeners return value matches the one set here then it will be removed\n     * after execution. This value defaults to true.\n     *\n     * @param {*} value The new value to check for when executing listeners.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.setOnceReturnValue = function setOnceReturnValue(value) {\n        this._onceReturnValue = value;\n        return this;\n    };\n\n    /**\n     * Fetches the current value to check against when executing listeners. If\n     * the listeners return value matches this one then it should be removed\n     * automatically. It will return true by default.\n     *\n     * @return {*|Boolean} The current value to check for or the default, true.\n     * @api private\n     */\n    proto._getOnceReturnValue = function _getOnceReturnValue() {\n        if (this.hasOwnProperty('_onceReturnValue')) {\n            return this._onceReturnValue;\n        }\n        else {\n            return true;\n        }\n    };\n\n    /**\n     * Fetches the events object and creates one if required.\n     *\n     * @return {Object} The events storage object.\n     * @api private\n     */\n    proto._getEvents = function _getEvents() {\n        return this._events || (this._events = {});\n    };\n\n    /**\n     * Reverts the global {@link EventEmitter} to its previous value and returns a reference to this version.\n     *\n     * @return {Function} Non conflicting EventEmitter class.\n     */\n    EventEmitter.noConflict = function noConflict() {\n        exports.EventEmitter = originalGlobalValue;\n        return EventEmitter;\n    };\n\n    // Expose the class either via AMD, CommonJS or the global object\n    if (typeof define === 'function' && define.amd) {\n        define(function () {\n            return EventEmitter;\n        });\n    }\n    else if (typeof module === 'object' && module.exports){\n        module.exports = EventEmitter;\n    }\n    else {\n        exports.EventEmitter = EventEmitter;\n    }\n}.call(this));\n"]}